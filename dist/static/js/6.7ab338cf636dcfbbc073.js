webpackJsonp([6],{epW7:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Dd8w"),r=n.n(i),s=n("NYxO"),a={name:"Index",data:function(){return{indexBlogs:[],totalPage:void 0,currentIndex:0,start:0,pageSize:5}},computed:r()({},Object(s.e)({user:function(t){return t.auth.user},isLogin:function(t){return t.auth.isLogin}}),{end:function(){return this.start+this.pageSize>this.totalPage?this.totalPage:this.start+this.pageSize-1}}),created:function(){var t=this;if(this.$route.query.page){var e=this.$route.query.page;this.currentIndex=e-1,this.updateIndexBlogs(e-1)}this.getIndexBlogs().then(function(e){t.indexBlogs=e.data,t.totalPage=+e.totalPage})},methods:r()({},Object(s.b)(["getIndexBlogs"]),{onClickIndex:function(t){this.currentIndex=t,this.updateIndexBlogs(t)},updateIndexBlogs:function(t){var e=this;this.getIndexBlogs(t+1).then(function(n){e.indexBlogs=n.data,e.totalPage=+n.totalPage,e.$router.push({path:"/",query:{page:t+1}}),e.watchCurrentIndex()})},goPageIndex:function(t){0===t?this.currentIndex=0:1===t&&(this.currentIndex=this.totalPage-1,this.start=this.currentIndex-this.pageSize+1),this.updateIndexBlogs(this.currentIndex)},pre:function(){0!==this.currentIndex&&(this.currentIndex-=1,this.updateIndexBlogs(this.currentIndex))},next:function(){this.currentIndex!==this.totalPage-1&&(this.currentIndex+=1,this.updateIndexBlogs(this.currentIndex))},watchCurrentIndex:function(){var t=this.start+Math.floor((this.pageSize-1)/2);if(this.currentIndex<=this.pageSize/2)this.start=0;else{if(this.currentIndex>=this.totalPage-Math.floor((this.pageSize-1)/2))return;this.start=this.start+this.currentIndex-t}}})},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"index"}},[n("x-layout",{attrs:{"x-min-height":"100vh"}},[n("x-header",{attrs:{"tips-txt":"index"}}),t._v(" "),n("x-content",[n("div",{staticClass:"content-inner"},[t._l(t.indexBlogs,function(e,i){return n("div",{staticClass:"blog-info"},[n("div",{staticClass:"user"},[n("router-link",{attrs:{to:"/user/"+e.user.id}},[n("img",{attrs:{src:e.user.avatar}})]),t._v(" "),n("p",[n("router-link",{attrs:{to:"/user/"+e.user.id}},[t._v(t._s(e.user.username))])],1)],1),t._v(" "),n("div",{staticClass:"blog-content"},[n("h3",[n("router-link",{attrs:{to:"/detail/"+e.id}},[t._v(t._s(e.title))])],1),t._v(" "),n("span",[t._v("发布于 "+t._s(t.friendlyDate(e.createdAt)))]),t._v(" "),n("p",[n("router-link",{attrs:{to:"/detail/"+e.id}},[t._v(t._s(e.description))])],1)])])}),t._v(" "),n("ul",{staticClass:"page-index-bar"},[n("li",{on:{click:function(e){t.goPageIndex(0)}}},[t._v("首页")]),t._v(" "),n("li",{on:{click:t.pre}},[t._v("上一页")]),t._v(" "),t._l(t.totalPage,function(e,i){return i>=t.start&&i<=t.end?n("li",{class:{active:t.currentIndex===i},attrs:{"data-index":i},on:{click:function(e){t.onClickIndex(i)}}},[t._v(t._s(e))]):t._e()}),t._v(" "),n("li",{on:{click:t.next}},[t._v("下一页")]),t._v(" "),n("li",{on:{click:function(e){t.goPageIndex(1)}}},[t._v("尾页")]),t._v(" "),n("span",[t._v("第 "+t._s(t.currentIndex+1)+" / "+t._s(t.totalPage)+" 页")])],2)],2)]),t._v(" "),n("x-footer")],1)],1)},staticRenderFns:[]};var u=n("VU/8")(a,o,!1,function(t){n("o7iz")},"data-v-4730b868",null);e.default=u.exports},o7iz:function(t,e){}});
//# sourceMappingURL=6.7ab338cf636dcfbbc073.js.map