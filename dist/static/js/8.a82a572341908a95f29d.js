webpackJsonp([8],{NKOg:function(t,e){},bywM:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("Dd8w"),i=s.n(n),r=s("NYxO"),a={name:"UserPage",data:function(){return{userId:"",indexBlogs:[],user:{},totalPage:0,currentIndex:0,start:0,pageSize:5}},computed:{end:function(){return this.start+this.pageSize>this.totalPage?this.totalPage:this.start+this.pageSize-1}},created:function(){var t=this;this.userId=this.$route.params.userId,this.getBlogsByUserId({userId:this.userId,page:1}).then(function(e){t.indexBlogs=e.data,t.indexBlogs[0]&&(t.user=t.indexBlogs[0].user),t.totalPage=+e.totalPage}).catch(function(){})},methods:i()({},Object(r.b)(["getBlogsByUserId"]),{updateIndexBlogs:function(t){var e=this;this.getBlogsByUserId({userId:this.userId,page:t+1}).then(function(t){e.indexBlogs=t.data,e.totalPage=+t.totalPage,e.watchCurrentIndex()})},goPageIndex:function(t){0===t?this.currentIndex=0:1===t&&(this.currentIndex=this.totalPage-1,this.start=this.currentIndex-this.pageSize+1),this.updateIndexBlogs(this.currentIndex)},pre:function(){0!==this.currentIndex&&(this.currentIndex-=1,this.updateIndexBlogs(this.currentIndex))},next:function(){this.currentIndex!==this.totalPage-1&&(this.currentIndex+=1,this.updateIndexBlogs(this.currentIndex))},onClickIndex:function(t){this.currentIndex=t,this.updateIndexBlogs(t)},watchCurrentIndex:function(){var t=this.start+Math.floor((this.pageSize-1)/2);if(this.currentIndex<=this.pageSize/2)this.start=0;else{if(this.currentIndex>=this.totalPage-Math.floor((this.pageSize-1)/2))return;this.start=this.start+this.currentIndex-t}}})},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"user"}},[s("x-layout",{attrs:{"x-min-height":"100vh"}},[s("x-header"),t._v(" "),s("x-content",[s("div",{staticClass:"content-inner"},[s("div",{staticClass:"user"},[s("div",{staticClass:"avatar-wrapper"},[s("router-link",{attrs:{to:"/user/"+t.user.id}},[s("img",{attrs:{src:t.user.avatar}})])],1),t._v(" "),s("p",{staticClass:"username"},[s("router-link",{attrs:{to:"/user/"+t.user.id}},[t._v(t._s(t.user.username))])],1)]),t._v(" "),s("h2",[t._v("发布的文章")]),t._v(" "),t._l(t.indexBlogs,function(e,n){return s("div",{staticClass:"blog-info"},[s("div",{staticClass:"time"},[s("h2",[t._v(t._s(t.friendlyDate(e.createdAt,"full").date))]),t._v(" "),s("p",[t._v(t._s(t.friendlyDate(e.createdAt,"full").month)+"月")]),t._v(" "),s("span",[t._v(t._s(t.friendlyDate(e.createdAt,"full").year))])]),t._v(" "),s("div",{staticClass:"blog-content"},[s("h3",[s("router-link",{attrs:{to:"/detail/"+e.id}},[t._v(t._s(e.title))])],1),t._v(" "),s("p",[s("router-link",{attrs:{to:"/detail/"+e.id}},[t._v(t._s(e.description))])],1)])])}),t._v(" "),s("ul",{staticClass:"page-index-bar"},[s("li",{on:{click:function(e){t.goPageIndex(0)}}},[t._v("首页")]),t._v(" "),s("li",{on:{click:t.pre}},[t._v("上一页")]),t._v(" "),t._l(t.totalPage,function(e,n){return n>=t.start&&n<=t.end?s("li",{class:{active:t.currentIndex===n},attrs:{"data-index":n},on:{click:function(e){t.onClickIndex(n)}}},[t._v(t._s(e))]):t._e()}),t._v(" "),s("li",{on:{click:t.next}},[t._v("下一页")]),t._v(" "),s("li",{on:{click:function(e){t.goPageIndex(1)}}},[t._v("尾页")]),t._v(" "),s("span",[t._v("第 "+t._s(t.currentIndex+1)+" / "+t._s(t.totalPage)+" 页")])],2)],2)]),t._v(" "),s("x-footer")],1)],1)},staticRenderFns:[]};var o=s("VU/8")(a,d,!1,function(t){s("NKOg")},"data-v-24188d09",null);e.default=o.exports}});
//# sourceMappingURL=8.a82a572341908a95f29d.js.map